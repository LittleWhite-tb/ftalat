ftalat_dcm : Frequency Transition Latency Estimator for Clock Modulation
DCM Point of Contact: Wei Wang <weiwang@udel.edu>, Allan Porterfield <akp@renci.org>, John Cavazos <cavazos@udel.edu>, Sridutt Bhalachandra <sriduttb@cs.unc.edu>

ftalat allows you to determine the time taken by your CPU to switch from one frequency to another one.
Here, the frequency change is supported by *software clock modulation* (see Intel System Programmers Guide)

#Prerequisites 
1) The machine must be an Intel processor, better chance of working with SandyBridge and Ivybridge. 
2) In general, non-extended software controlled clock modulation supports eight frequencies, with an interval of 12.5% and
extended version supports sixteen frequencies, with an interval of 6.25%. Extension to software controlled clock modulation is supported only if CPUID.06H:EAX[Bit 5] = 1. Also the CPU must have ACPI feature to support both extended and non-extended software controlled clock modulation, i.e. CPUID.01H:EDX[Bit 22]=1.
3) If any of the CPUID output is not 1, code modification is required. 


# Compilation
```
    make dcm
```
or
```
    make trace
```
to compile a second version of ftalat writing latency for each run of the kernel. A graph of this data can be displayed using the GNUPlot script `traceViewer.gnuplot`

# Usage
```
    ./ftalat_dcm startFreq targetFreq
    where startFreq is the frequency at the beginning of the test and targetFreq the frequency to switch to
    The program will output the time taken by your CPU to swtich from startFreq to targetFreq
    ftalat_dcm must be run with ***root*** to set clock modulation (write to a msr)
```

The script `ftalat_dcm_runner.sh` allows you to run the test for all frequencies couple (in the realm of software clock modulation) for your CPU. The script will write the output in a folder `Results`
From the files written in the `Results` folder, you can generate graphs. To do this, you need to use the python scripts from the `script` folder.
```
    ./extract.py data_folder output_folder
    data_folder should be 'Results' folder
    output_folder is a new folder (which has to be created before) where the proceed files will be stored.
```

Then, you have to run
```
    ./generateGraph_DCM.py input_folder file
    where input_folder is the folder where the files generated by extract.py are located
    and file, the name of the file (without extension) for graph output (PDF) and latency table (a GNUPlot script is also generated)
```

# Depencies
You must have python (2.7) and GNUPlot installed

# Licence
The program is licenced under GPLv3. Please read [COPYRIGHT](https://github.com/LittleWhite-tb/ftalat/blob/master/COPYRIGHT) file for more information
